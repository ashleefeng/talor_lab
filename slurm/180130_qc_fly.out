+ edwBamFilter -sponge -chrom=chrM /home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered.bam /home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_no_chrM.bam
Sponge size 0
Wrote 9981810 of 10059570 reads
+ set +x
+ samtools index /home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_no_chrM.bam
+ set +x
+ edwBamStats -sampleBamSize=10059570 -u4mSize=10059570 -sampleBam=/home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_10059570_sample.bam /home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_no_chrM.bam /home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_no_chrM_sampling_edwBamStats.txt
Scanned 9981810 reads in /home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_no_chrM.bam
u4mUniqueRatio 0.902708
+ edwBamStats /home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_10059570_sample.bam /home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_10059570_sample_edwBamStats.txt
Scanned 9980989 reads in /home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_10059570_sample.bam
u4mUniqueRatio 0.976255
+ samtools index /home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_10059570_sample.bam
+ set +x
+ gzip -c
+ gawk 'BEGIN{OFS="\t"}{if (and($2,16) > 0) {print $3,($4-1),($4-1+length($10)),"N","1000","-"} else {print $3,($4-1),($4-1+length($10)),"N","1000","+"} }'
+ samtools view -F 0x0204 -o - /home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_10059570_sample.bam
+ Rscript phantompeakqualtools/run_spp.R -x=-500:-1 -s=-500:5:1500 -rf -c=/home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_10059570_sample.tagAlign.gz -out=/home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_10059570_sample_spp.txt
During startup - Warning message:
Setting LC_CTYPE failed, using "C" 
Loading required package: caTools
There were 50 or more warnings (use warnings() to see the first 50)
+ touch /home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_10059570_sample_spp.txt
+ set +x
+ awk 'BEGIN{mt=0;m0=0;m1=0;m2=0} ($1==1){m1=m1+1} ($1==2){m2=m2+1} {m0=m0+1} {mt=mt+$1} END{printf "%d\t%d\t%d\t%d\t%f\t%f\t%f\n",mt,m0,m1,m2,m0/mt,m1/m0,m1/m2}'
+ sort
+ uniq -c
+ grep -v chrM
+ awk 'BEGIN{OFS="\t"}{print $1,$2,$3,$6}'
+ bedtools bamtobed -i /home-4/xfeng17@jhu.edu/data/xfeng17/dnase/dm/oregon/ENCFF005BHD_trimmed_filtered_10059570_sample.bam
+ set +x
+ tar -xzf /home-4/xfeng17@jhu.edu/data/xfeng17/ref_genome/dm/dm6_bwa_index.tgz
+ set +x
+ awk '{printf "%s\t%s\t%s\t%s\n",$1,$2,$3,$1}'
+ grep '^chr' chrom_sizes.bed
+ sort-bed -
grep: chrom_sizes.bed: No such file or directory
+ set +x
+ unstarch mappable_target.starch
ERROR: ENOENT - A component of the filename does not name an existing file or filename is an empty string
ERROR: Archive file mappable_target.starch could not be opened
ERROR: Could not read metadata
unstarch
  citation: http://bioinformatics.oxfordjournals.org/content/28/14/1919.abstract
            https://doi.org/10.1093/bioinformatics/bts277
  binary version: 2.4.30 (typical) (extracts archive version: 2.2.0 or older)
  authors: Alex Reynolds and Shane Neph

USAGE: unstarch [ <chromosome> ]  [ --elements | 
                                    --elements-max-string-length |
                                    --bases | --bases-uniq |
                                    --has-duplicates | --has-nested | --list |
                                    --list-json | --list-chromosomes |
                                    --archive-timestamp | --note |
                                    --archive-version | --is-starch |
                                    --signature | --verify-signature ]
                                    <starch-file>

    Modifiers
    --------------------------------------------------------------------------
    <chromosome>                     Optional. Either unarchives chromosome-
                                     specific records from the starch archive
                                     file or restricts action of operator to
                                     chromosome (e.g., chr1, chrY, etc.).

    Process Flags
    --------------------------------------------------------------------------
    --elements                       Show total element count for archive. If
                                     <chromosome> is specified, the result
                                     shows the element count for the
                                     chromosome.

    --elements-max-string-length     Show the maximum string length over all
                                     elements in <chromosome>, if specified.
                                     If <chromosome> is not specified, the
                                     maximum string length is shown over all
                                     chromosomes.

    --bases,
    --bases-uniq                     Show total and unique base counts,
                                     respectively, for archive. If
                                     <chromosome> is specified, the count is
                                     specific to the chromosome, if available.

    --has-duplicate-as-string, 
    --has-duplicate                  Show whether there is one or more
                                     duplicate elements in the specified
                                     chromosome, either as a numerical (1/0)
                                     or string (true/false) value. If no
                                     <chromosome> is specified, the value
                                     given indicates if there is one or more
                                     duplicate elements across all chromosome
                                     records.

    --has-nested-as-string, 
    --has-nested                     Show whether there is one ore more nested
                                     elements in the specified chromosome,
                                     either as a numerical (1/0) or string
                                     (true/false) value. If no <chromosome> is
                                     specified, the value given indicates if
                                     there is one or more nested elements
                                     across all chromosome records.

    --list                           List archive metadata (output is in text
                                     format). If chromosome is specified, the
                                     attributes of the given chromosome are
                                     shown.

    --list-json, 
    --list-json-no-trailing-newline  List archive metadata (output is in JSON
                                     format)

    --list-chr,                      
    --list-chromosomes               List all or specified chromosome in
                                     starch archive (like "bedextract --list-
                                     chr"). If <chromosome> is specified but
                                     is not in the output list, nothing is
                                     returned.

    --note                           Show descriptive note, if available.

    --signature                      Display the Base64-encoded SHA-1 data
                                     integrity signature for specified
                                     <chromosome>, or the signatures of the
                                     metadata and all available chromosomes,
                                     if the <chromosome> is unspecified.

    --verify-signature               Verify data integrity of specified
                                     <chromosome>, or the integrity of all
                                     available chromosomes, if the
                                     <chromosome> is unspecified.

    --archive-timestamp              Show archive creation timestamp (ISO 8601
                                     format).

    --archive-type                   Show archive compression type.

    --archive-version                Show archive version.

    --is-starch                      Test if <starch-file> is a valid archive
                                     and print 0/1 (false/true) to standard
                                     output. Unstarch will also return a non-
                                     zero error code if the input file is not
                                     a valid archive.

    --version                        Show binary version.

    --help                           Show this usage message.

